<%# Idea view at top %>
<%= render 'idea', obj: @idea %>

<%# Entire vote and comment section %>
<div class="row col-md-12">
  
  <%# Left side %>
  <div class="col-md-6">
    
    <%# Top left %>
    <%# Voting form, is hidden when idea is closed %>
    <% if @idea.open? %>
      <div class="well col-md-12">
        <%= render 'votes/form', obj: @idea %>
      </div>
    <% end %>
    
    <%# Bottom left %>
    <%# Voting stats %>
    <div class="well col-md-12">
      <%= render 'votes/stats' %>
    </div>
  </div>
  
  <%# Right side %>
	<div class="col-md-6">
    
    <%# Top right %>
    <%# Comment form, hidden when idea is closed %>
    <% if @idea.open? %>
      <%# Modal Button %>
      <button type="button" class="btn btn-success" data-toggle="modal"
              data-target="#createComment">Create a comment</button>
      <%# Modal %>
    	<div class="modal fade" id="createComment" role="dialog">
    		<div class="modal-dialog">
          <%# Modal Content %>
    			<div class="modal-content">
    				<div class="modal-header">
     					<strong>Add a comment:</strong>
    					<button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
            </div>
    				<div class="modal-body">
  				    <%= render 'comments/form' %>
    				</div>
    			</div>
    		</div>
    	</div>
	  <% end %>
    
    <%# Bottom right %>
    <%# Comments %>
      <% if @idea.comments.count > 0 %>
      
        <% if @idea.closed? %>
          <h6 align="center">
            [ This idea is closed, and can no longer be commented on ]
          </h6>
        <% end %>
        
        <button type="button" class="btn btn-success" data-toggle="modal"
                  data-target="#viewComment">View Comments</button>
                  
        <div class="modal fade" id="viewComment">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                  &times;
                </button>
              </div>
              <br>
              <div class="modal-body">
                <div class="well col-md-12">
                  <div class="scroller">
                    <h4>Comments</h4>
                    <div class = "comment-text">
                      <table class ="table table-striped">
                        <%= render @idea.comments.order(created_at: :desc) %>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      <% else %>
        <h5>There are no comments! Be the first!</h5>
      <% end %>
    
	</div>
</div>
